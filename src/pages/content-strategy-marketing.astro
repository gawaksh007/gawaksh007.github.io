---
import MainLayout from "../layouts/MainLayout.astro";
import Section from "../components/sections/Section.astro";
import SectionTitle from "../components/ui/SectionTitle.astro";
import Form from "../components/ui/Form.astro";
import { Image } from "astro:assets";
import Card from "../components/ui/Card.astro";
import BrandServices from "../components/sections/BrandServices.astro";
import propImg from "../../src/assets/pics/proposal-pic.png";
import 'swiper/css';
import 'swiper/css/pagination';
import 'swiper/css/navigation';

// Case Studies Data
const caseStudies = [
  {
    client: "Tech Innovation Corp",
    challenge: "Struggling to differentiate in a crowded market",
    solution: "Developed a unique brand voice and content strategy",
    results: [
      "150% increase in brand awareness",
      "45% improvement in engagement",
      "2x increase in qualified leads"
    ],
    image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f",
    logo: "/path-to-logo.png"
  },
  {
    client: "EcoStyle Fashion",
    challenge: "Needed to establish sustainable brand identity",
    solution: "Created compelling sustainability narrative and visual identity",
    results: [
      "200% growth in social following",
      "35% increase in customer loyalty",
      "3x increase in brand mentions"
    ],
    image: "https://images.unsplash.com/photo-1441986300917-64674bd600d8",
    logo: "/path-to-logo.png"
  },
  {
    client: "HealthTech Solutions",
    challenge: "Complex product messaging needed simplification",
    solution: "Developed clear, engaging communication strategy",
    results: [
      "80% improvement in message clarity",
      "60% increase in lead quality",
      "40% reduction in sales cycle"
    ],
    image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1d",
    logo: "/path-to-logo.png"
  },
  {
    client: "Global Finance Group",
    challenge: "Traditional brand needed digital transformation",
    solution: "Modernized brand voice while maintaining trust",
    results: [
      "90% increase in digital engagement",
      "50% growth in younger demographic",
      "4x increase in social sharing"
    ],
    image: "https://images.unsplash.com/photo-1554774853-719586f82d77",
    logo: "/path-to-logo.png"
  },
  {
    client: "FoodieHub",
    challenge: "Needed to stand out in competitive delivery market",
    solution: "Created distinctive brand personality and campaign",
    results: [
      "175% increase in app downloads",
      "55% boost in customer retention",
      "3x growth in market share"
    ],
    image: "https://images.unsplash.com/photo-1498837167922-ddd27525d352",
    logo: "/path-to-logo.png"
  }
];

// Value Props
const valueProps = [
  {
    title: "Data-Driven Approach",
    description: "We analyze audience insights to craft messaging that works.",
    icon: "üìä"
  },
  {
    title: "Multi-Channel Strategy",
    description: "From social media to PR, we cover all touchpoints.",
    icon: "üéØ"
  },
  {
    title: "Proven Success",
    description: "Our track record speaks for itself with impactful brand stories.",
    icon: "üèÜ"
  }
];
---
<MainLayout title="Brand Communications - Tagorithm">
  <main class="space-y-16 md:space-y-24"> <!-- Increased spacing on desktop -->

    <!-- Hero Section -->
    <section class="relative min-h-[90vh] flex items-center overflow-hidden">
      <!-- Add subtle animated shapes in background -->
      <div class="absolute inset-0 overflow-hidden">
        <div class="absolute -top-20 -left-20 w-72 h-72 bg-[#B9FF66]/20 rounded-full blur-3xl"></div>
        <div class="absolute top-40 right-20 w-96 h-96 bg-[#66FFB9]/20 rounded-full blur-3xl"></div>
      </div>
      <div class="container mx-auto px-4 relative z-10">
        <div class="flex flex-col-reverse md:flex-row items-center justify-between gap-8 md:gap-12">
          <!-- Left: Text Content -->
          <div class="w-full md:w-1/2 space-y-6 text-center md:text-left">
          <h1 class="text-4xl md:text-6xl font-bold leading-tight animate-fade-in">
              <span class="highlight">Content Strategy</span> &amp; Marketing
            </h1>
            <p class="text-lg md:text-xl text-gray-700 animate-fade-in-delay">
              Engaging, data-led content that fuels your marketing funnel.
            </p>
            <div class="flex justify-center md:justify-start gap-4 animate-fade-in-delay-2">
              <a href="#contact" class="btn-primary">Get a Callback</a>
            </div>
          </div>
          <!-- Right: Image -->
          <div class="w-full md:w-1/2 flex justify-center">
            <img 
              src="/bc.png" 
              alt="Brand Communications Illustration" 
              class="w-[90%] md:w-full h-auto object-contain"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Introduction Section -->
    <Section>
      <div class="container mx-auto px-4">
        <SectionTitle sectionTitle="Your Story, Amplified" />
        <div class="flex flex-col md:flex-row items-start gap-8 mt-12 relative"> <!-- Removed mb-[-200px] and added relative -->
          <div class="md:w-1/2">
            <p class="text-xl text-left max-w-xl">
              Quality content drives traffic and builds authority. We develop cohesive content strategies that align with your brand objectives, from blog articles to multimedia assets. By analyzing audience insights, we deliver messages that convert browsers into loyal customers.
            </p>
          </div>
          <div class="md:w-1/2 flex justify-center absolute right-0 -top-40"> <!-- Changed positioning -->
            <img 
              src="/lips.png" 
              alt="Brand Communication Illustration" 
              class="w-[270px] h-[310px] object-cover z-10"
            />
          </div>
        </div>
      </div>
    </Section>
    <div class="relative z-0"> <!-- Changed from -mt-20 to relative and z-0 -->
    <BrandServices/>
    </div>

    <!-- Replace the "Not sure where to start" CTA with this Proposal Section -->
    <Section>
      <Card>
        <div class="flex flex-col md:flex-row bg-[#F3F3F3] rounded-[45px] p-[60px] relative mt-[123px] mb-[163px]">
          <div class="w-full md:w-[40%] flex flex-col gap-[26px]">
            <h2 class="text-3xl font-medium">Let's make things happen</h2>
            <p>
              Contact us today to learn more about how our digital marketing
              services can help your business grow and succeed online.
            </p>
            <button class="btn-primary">Get your free proposal</button>
          </div>
          <picture class="hidden md:flex absolute right-[-10%] lg:right-0 top-[-15%] h-[450px] items-center justify-center">
            <Image
              src={propImg}
              alt="This is an illustration"
              class="hidden md:flex lg:h-full lg:w-auto"
            />
          </picture>
        </div>
      </Card>
    </Section>

    <!-- Update the Case Studies Section -->
    <Section class="bg-gray-50 py-20">
      <div class="container mx-auto px-4">
        <SectionTitle
          sectionTitle="Our Impact in Action"
          description="Real Results from Real Partnerships"
        />
        
        <div class="relative max-w-[1400px] mx-auto mt-16">
          <!-- Carousel Container -->
          <div class="swiper case-studies-swiper px-12">
            <div class="swiper-wrapper">
              {caseStudies.map(study => (
                <div class="swiper-slide">
                  <div class="bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group h-[700px]"> <!-- Added fixed height -->
                    <!-- Image Section with overlay -->
                    <div class="relative h-[220px] overflow-hidden">
                      <img 
                        src={study.image} 
                        alt={study.client} 
                        class="w-full h-full object-cover transform transition-all group-hover:scale-105 group-hover:grayscale-0 duration-500 opacity-90 grayscale"
                      />
                      <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-60"></div>
                      <!-- Title section with consistent height -->
                      <div class="absolute bottom-0 left-0 p-6 w-full">
                        <div class="h-[60px] flex flex-col justify-end"> <!-- Fixed height container for title -->
                          <h3 class="text-xl font-bold text-black mb-1 bg-[#B9FF66] inline-block px-3 py-1 rounded-lg">
                            {study.client}
                          </h3>
                         <!-- <p class="text-gray-200 text-sm">{study.industry}</p>-->
                        </div>
                      </div>
                    </div>
                    
                    <!-- Content Section with fixed heights -->
                    <div class="p-6 space-y-4 h-[480px] flex flex-col"> <!-- Reduced space-y-6 to space-y-4 -->
                      <div class="space-y-3 flex-1"> <!-- Reduced space-y-4 to space-y-3 -->
                        <!-- Challenge Section -->
                        <div class="h-[100px]"> <!-- Reduced height from 120px to 100px -->
                          <h4 class="text-lg font-semibold text-gray-900 flex items-center gap-2 bg-[#B9FF66]/20 w-fit px-3 py-1 rounded-lg mb-2"> <!-- Reduced mb-3 to mb-2 -->
                            <span class="w-1 h-1 bg-[#B9FF66] rounded-full"></span>
                            Challenge
                          </h4>
                          <p class="text-gray-600 text-sm line-clamp-3">{study.challenge}</p>
                        </div>
                        
                        <!-- Solution Section -->
                        <div class="h-[100px]"> <!-- Reduced height from 120px to 100px -->
                          <h4 class="text-lg font-semibold text-gray-900 flex items-center gap-2 bg-[#B9FF66]/20 w-fit px-3 py-1 rounded-lg mb-2"> <!-- Reduced mb-3 to mb-2 -->
                            <span class="w-1 h-1 bg-[#B9FF66] rounded-full"></span>
                            Solution
                          </h4>
                          <p class="text-gray-600 text-sm line-clamp-3">{study.solution}</p>
                        </div>
                      </div>
                      
                      <!-- Results Section -->
                      <div class="bg-gray-50 rounded-xl p-3 mt-2"> <!-- Reduced p-4 to p-3 and added mt-2 -->
                        <h4 class="text-lg font-semibold text-gray-900 mb-2 flex items-center gap-2 bg-[#B9FF66]/20 w-fit px-3 py-1 rounded-lg"> <!-- Reduced mb-3 to mb-2 -->
                          <span class="w-1 h-1 bg-[#B9FF66] rounded-full"></span>
                          Results
                        </h4>
                        <div class="grid grid-cols-1 gap-2"> <!-- Reduced gap-3 to gap-2 -->
                          {study.results.map(result => (
                            <div class="flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-100"> <!-- Reduced p-3 to p-2 and gap-3 to gap-2 -->
                              <span class="text-[#B9FF66] text-xl">‚Üó</span>
                              <span class="text-gray-800 text-sm font-medium">{result}</span>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
            
            <!-- Navigation Elements -->
            <div class="swiper-button-prev !text-[#B9FF66] !left-0"></div>
            <div class="swiper-button-next !text-[#B9FF66] !right-0"></div>
          </div>
          
          <!-- Pagination -->
          <div class="swiper-pagination !relative !bottom-0 mt-10"></div>
        </div>
      </div>
    </Section>

    <!-- Why Choose Tagorithm? (Value Proposition) -->
    <Section>
      <SectionTitle
        sectionTitle="Why Brands Trust Us"
        description="Proven Expertise in Brand Communications"
      />
      <div class="container mx-auto px-4">
        <!-- Update the Value Props cards -->
        <div class="grid md:grid-cols-3 gap-8 mt-12">
          {valueProps.map(prop => (
            <div class="text-center p-8 rounded-2xl border border-gray-100 hover:border-[#B9FF66] transition-all duration-300 hover:shadow-lg bg-white group">
              <div class="text-5xl mb-6 transform transition-transform group-hover:scale-110 duration-300">{prop.icon}</div>
              <h3 class="text-xl font-bold mb-3">{prop.title}</h3>
              <p class="text-gray-600 leading-relaxed">{prop.description}</p>
            </div>
          ))}
        </div>
      </div>
    </Section>

    <!-- Call-to-Action (Final Push) / Contact Form -->
    <Section id="contact">
      <div class="mb-[140px] relative">
        <SectionTitle
          sectionTitle="Contact Us"
          description="Connect with Us: Let's Discuss Your Digital Marketing Needs"
        />
        <Form />
      </div>
    </Section>

  </main>
</MainLayout>

<style>
  /* Gradient and animation styles */
  .animate-gradient-x {
    animation: gradient-x 15s ease infinite;
    background-size: 400% 400%;
  }
  @keyframes gradient-x {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  .animate-fade-in {
    animation: fade-in 1s ease-out;
  }
  .animate-fade-in-delay {
    animation: fade-in 1s ease-out 0.3s forwards;
    opacity: 0;
  }
  .animate-fade-in-delay-2 {
    animation: fade-in 1s ease-out 0.6s forwards;
    opacity: 0;
  }
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Highlight style */
  .highlight {
    background-color: white;
    color: #B9FF66; /* Green text color */
    padding: 0 0.02em;
    border-radius: 0.4em;
    text-shadow: 
      -1px -1px 0 #000,  
       1px -1px 0 #000,
      -1px  1px 0 #000,
       1px  1px 0 #000;
    -webkit-text-stroke: 0.5px black; /* For better browser compatibility */
  }

  /* Hero image container style */
  .hero-image-container {
    width: 100%;
  }

  /* Hero image style */
  .hero-image {
    width: 120%; /* Increase size by 20% */
    height: auto;
  }

  /* Loading skeleton styles */
  .image-skeleton {
    background-color: #E5E7EB; /* Instead of @apply bg-gray-200 */
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: .5;
    }
  }

  /* Typography improvements */
  h1, h2, h3, h4 {
    letter-spacing: -0.02em;
  }

  .content-text {
    color: rgb(75, 85, 99); /* Instead of @apply text-gray-600 */
    line-height: 1.75; /* Instead of @apply leading-relaxed */
    font-size: clamp(1rem, 1.5vw, 1.125rem);
  }

  /* Swiper navigation improvements */
  .swiper-button-next,
  .swiper-button-prev {
    width: 40px;
    height: 40px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
  }

  .swiper-button-next:hover,
  .swiper-button-prev:hover {
    background: #B9FF66;
    color: white !important;
  }

  .swiper-button-next::after,
  .swiper-button-prev::after {
    font-size: 18px;
    font-weight: bold;
  }

  /* Pagination improvements */
  .swiper-pagination-bullet {
    width: 8px;
    height: 8px;
    transition: all 0.3s ease;
  }

  .swiper-pagination-bullet-active {
    background: #B9FF66;
    width: 24px;
    border-radius: 4px;
  }

  /* Fade in animation */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeInUp {
    animation: fadeInUp 0.6s ease forwards;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .swiper-slide {
    height: auto;
    display: flex;
  }

  .swiper-slide > div {
    height: 100%;
    width: 100%;
  }
</style>

<script>
  import Swiper from 'swiper';
  import { Navigation, Pagination, Autoplay } from 'swiper/modules';

  new Swiper('.case-studies-swiper', {
    modules: [Navigation, Pagination, Autoplay],
    slidesPerView: 1,
    spaceBetween: 24,
    loop: true,
    centeredSlides: true,
    autoplay: {
      delay: 5000,
      disableOnInteraction: false,
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    breakpoints: {
      640: {
        slidesPerView: 1,
        spaceBetween: 20,
      },
      768: {
        slidesPerView: 1.5,
        spaceBetween: 24,
      },
      1024: {
        slidesPerView: 2,
        spaceBetween: 24,
      },
      1280: {
        slidesPerView: 3,
        spaceBetween: 24,
      }
    },
  });

  // Using Intersection Observer for scroll animations
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-fadeInUp');
      }
    });
  }, {
    threshold: 0.1
  });

  document.querySelectorAll('section').forEach(section => {
    observer.observe(section);
  });
</script>
